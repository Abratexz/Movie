<%- include('../partials/header', { title: "Login", active: "auth" }) %>

<section class="d-flex justify-content-center align-items-center" style="min-height: 80vh;">
  <div class="card bg-dark text-white shadow-lg p-4" style="min-width: 350px; max-width: 400px; width: 100%;">
    <h2 class="text-center mb-4">üîê Login to MovieTicket</h2>

    <form action="/auth/login" method="POST" novalidate>
      <!-- preserve where to return after login -->
      <input type="hidden" name="next" value="<%= typeof next !== 'undefined' ? next : (typeof query !== 'undefined' ? query.next : '/') %>">

      <div class="mb-3">
        <label for="email" class="form-label">Email address</label>
        <input
          type="email"
          class="form-control bg-secondary text-white"
          id="email"
          name="email"
          required
          autofocus
          autocomplete="email"
          value="<%= typeof old !== 'undefined' && old.email ? old.email : '' %>"
        />
      </div>

      <div class="mb-3">
        <label for="password" class="form-label">Password</label>
        <input
          type="password"
          class="form-control bg-secondary text-white"
          id="password"
          name="password"
          required
          autocomplete="current-password"
        />
        <div class="text-end mt-1">
          <!-- use the route you actually mounted: /auth/forgot -->
          <a href="/auth/forgot" class="text-decoration-none text-warning small">Forgot Password?</a>
        </div>
      </div>

      <% if (error && error.length > 0) { %>
        <div class="alert alert-danger text-center"><%= error[0] %></div>
      <% } %>
      <% if (success && success.length > 0) { %>
        <div class="alert alert-success text-center"><%= success[0] %></div>
      <% } %>
      
      <div class="d-grid">
        <button type="submit" class="btn btn-danger">Login</button>
      </div>

      <div class="mt-3 text-center">
        <small>
          Don't have an account?
          <a href="/auth/register" class="text-decoration-none text-warning">Register here</a>
        </small>
      </div>
    </form>
  </div>
</section>

<%- include('../partials/footer') %>
